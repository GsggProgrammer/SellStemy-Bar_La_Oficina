<!DOCTYPE html>
<html lang="es">
    <head>
        <title>Registrar Usuarios Bar-LaOficina</title>
        <meta charset="utf-8">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link rel="stylesheet" href="../estilos/Vistas.css">
        <link rel="stylesheet" href="../estilos/Consultas.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

        <script> 

document.addEventListener("DOMContentLoaded", function() {
            // Obtén la fecha actual y resta 18 años
            const hoy = new Date();
            hoy.setFullYear(hoy.getFullYear() - 18);
            const maxFechaNacimiento = hoy.toISOString().split("T")[0];

            // Establece el valor máximo en el input de fecha de nacimiento
            document.getElementById("fechaNacimiento").max = maxFechaNacimiento;
        });
        
          contadorPP = 5;
          contadorT = 5;
      
          function adicionarPP() {
              // Obtener referencia de la tabla
              var tabla = document.getElementById("tabla_PP");
              
              // Insertar una nueva fila al final de la tabla
              var nuevaFila = tabla.insertRow(-1); // "-1" inserta la fila al final
              nuevaFila.className = "fila-adicionada"; // Marcar fila como adicionada
              
              // Insertar nuevas celdas en la fila
              var celda1 = nuevaFila.insertCell(0);
              var celda2 = nuevaFila.insertCell(1);
              var celda3 = nuevaFila.insertCell(2);
              var celda4 = nuevaFila.insertCell(3);
              var celda5 = nuevaFila.insertCell(4); // Celda para el botón de eliminar
      
              // Agregar input de nombre de empresa o institución a la nueva celda
              var inputNombre = document.createElement("input");
              inputNombre.type = "text";
              inputNombre.name = "PP" + contadorPP;
              contadorPP++;
              inputNombre.required = "required";
              inputNombre.className = "form-control";
              celda1.appendChild(inputNombre);
      
              // Agregar input de cargo a la nueva celda
              var inputCargo = document.createElement("input");
              inputCargo.type = "text";
              inputCargo.name = "PP" + contadorPP;
              contadorPP++;
              inputCargo.className = "form-control";
              celda2.appendChild(inputCargo);
      
              // Agregar input de descripción a la nueva celda
              var inputDescripcion = document.createElement("input");
              inputDescripcion.type = "text";
              inputDescripcion.name = "PP" + contadorPP;
              contadorPP++;
              inputDescripcion.className = "form-control";
              inputDescripcion.required = "required";
              celda3.appendChild(inputDescripcion);
      
              // Agregar input de teléfono a la nueva celda
              var inputTelefono = document.createElement("input");
              inputTelefono.type = "number";
              inputTelefono.min = "3000000000";
              inputTelefono.max = "6999999999";
              inputTelefono.name = "PP" + contadorPP;
              contadorPP++;
              inputTelefono.required = 'required';
              inputTelefono.className = "form-control";
              celda4.appendChild(inputTelefono);
      
              // Agregar botón de eliminar
              var botonEliminar = document.createElement("button");
              botonEliminar.innerText = "Eliminar";
              botonEliminar.type = "button";
              botonEliminar.className = "btn btn-danger";
              botonEliminar.onclick = function() { eliminarFila(this); };
              celda5.appendChild(botonEliminar);
          }
      
          function adicionarT() {
              // Obtener referencia de la tabla
              var tabla = document.getElementById("tabla_T");
              
              // Insertar una nueva fila al final de la tabla
              var nuevaFila = tabla.insertRow(-1); // "-1" inserta la fila al final
              nuevaFila.className = "fila-adicionada"; // Marcar fila como adicionada
              
              // Insertar nuevas celdas en la fila
              var celda1 = nuevaFila.insertCell(0);
              var celda2 = nuevaFila.insertCell(1);
              var celda3 = nuevaFila.insertCell(2);
              var celda4 = nuevaFila.insertCell(3);
              var celda5 = nuevaFila.insertCell(4); // Celda para el botón de eliminar
      
              // Agregar input de nombre de entidad a la nueva celda
              var inputNombreEntidad = document.createElement("input");
              inputNombreEntidad.type = "text";
              inputNombreEntidad.name = "T" + contadorT;
              contadorT++;
              inputNombreEntidad.required = "required";
              inputNombreEntidad.className = "form-control";
              celda1.appendChild(inputNombreEntidad);
      
              // Agregar input de nombre de título a la nueva celda
              var inputNombreTitulo = document.createElement("input");
              inputNombreTitulo.type = "text";
              inputNombreTitulo.name = "T" + contadorT;
              contadorT++;
              inputNombreTitulo.required = "required";
              inputNombreTitulo.className = "form-control";
              celda2.appendChild(inputNombreTitulo);
      
              // Agregar input de descripción a la nueva celda
              var inputDescripcion = document.createElement("input");
              inputDescripcion.type = "text";
              inputDescripcion.name = "T" + contadorT;
              contadorT++;
              inputDescripcion.className = "form-control";
              inputDescripcion.required = "required";
              celda3.appendChild(inputDescripcion);
      
              // Agregar input de año a la nueva celda
              var inputAño = document.createElement("input");
              inputAño.type = "number";
              inputAño.min = "1960";
              inputAño.max = "2024";
              inputAño.name = "T" + contadorT;
              contadorT++;
              inputAño.required = "required";
              inputAño.className = "form-control";
              celda4.appendChild(inputAño);
      
              // Agregar botón de eliminar
              var botonEliminar = document.createElement("button");
              botonEliminar.innerText = "Eliminar";
              botonEliminar.type = "button";
              botonEliminar.className = "btn btn-danger";
              botonEliminar.onclick = function() { eliminarFila(this); };
              celda5.appendChild(botonEliminar);
          }
      
          // Función para eliminar la fila añadida dinámicamente
          function eliminarFila(boton) {
              var fila = boton.parentNode.parentNode; // Obtener la fila del botón
              fila.parentNode.removeChild(fila); // Eliminar la fila
          }
      </script>
    </head>
    <body>
    <div class="container-fluid">
    <section>
          <div class="row">
            <div class="col-2">
              <a href="../vistaprincipal.php" class="btn btn-outline-dark mr-auto volver">
                <i class="fas fa-arrow-left"></i> <span>Volver</span>
              </a>
            </div>
            <div class="col-8">
              <h1> Registrar Usuarios Bar-LaOficina </h1>
            </div>
            <div class="col-2">
              <a href="#" class="btn btn-outline-dark cerrarSesion" onclick="cerrarSesion()">
                <i class="fas fa-sign-out-alt"></i> <span>Cerrar sesión</span>
              </a>
            </div>
          </div>
            <form method="post" action="../controlador/CUsuario.php">
            <div class="row">
              <div class="col-4">
                <label>Numero Documento</label>
                <input type="number" min="1000000" max="999999999999" id="d1" name="d1" required>
              </div>
              <div class="col-4">
                <label>Nombre Completo</label>
                <input type="text" maxlength="100" id="d2" name="d2" required>
              </div>
              <div class="col-4">
                <label>Correo Electronico</label>
                <input type="email" id="d3" name="d3" required>
              </div>
            </div>
            <div class="row">
              <div class="col-3">
                <label>Telefono</label>
                <input type="number" min="3000000000" max="9999999999" id="d4" name="d4" required>
              </div>
              <div class="col-3">
                <label>Direccion</label>
                <input type="text" maxlength="100" id="d5" name="d5" required>
              </div>
              <div class="col-3">
                <label>Genero</label>
                <select name="d6">
                  <option value="Masculino">Masculino</option>
                  <option value="Femenino">Femenino</option>
                  <option value="Otro">Otro</option>
                </select>
              </div>
              <div class="col-3">
                <label>Tipo De Usuario</label>
                <select name="d7" required>
                  <option value="Administrador">Administrador</option>
                  <option value="Cajero">Cajero</option>
                  <option value="Almacenista">Almacenista</option>
                </select>
              </div>
            </div>
            <div class="row">
                <div class="col-4">
                    <label> Fecha Nacimiento </label>
                    <input type="date" id="d8" id="fechaNacimiento" name="d8" required>
                </div>
                <div class="col-4">
                    <label> Tipo De Sangre </label>
                    <select name="d9" id="d9" required>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                        <option value="A-">A-</option>
                        <option value="A+">A+</option>
                        <option value="B-">B-</option>
                        <option value="B+">B+</option>
                        <option value="AB-">AB-</option>
                        <option value="AB+">AB+</option>
                      </select>
                </div>
                <div class="col-4">
                    <label> EPS </label>
                    <input type="text" id="d10" name="d10" required>
                </div>
            </div>
            <div class="row">
              <div class="col-6">
                <label>Estado Civil</label>
                <select name="d11" id="d11" required>
                    <option value="Soltero">Soltero</option>
                    <option value="Casado">Casado</option>
                    <option value="Divorciado">Divorciado</option>
                    <option value="Viudo">Viudo</option>
                    <option value="Separado">Separado</option>
                    <option value="Union Libre">Union Libre</option>
                    <option value="Union Civil">Union Civil</option>
                  </select>
              </div>
              <div class="col-6">
                <label>Contraseña</label>
                <input type="text" id="password" maxlength="10" id="d7" name="d12" required>
              </div>
              <div class="row">
                <div class="col-12">
                  <legend>Titulos</legend>
                  <table id="tabla_T">
                    <tr>
                    <div class="row">
                        <td><label for="exampleFormControlInput13" class="form-label">Nombre De Entidad</label></td>
                        <td><label for="exampleFormControlInput14" class="form-label">Nombre Del Titulo</label></td>
                        <td><label for="exampleFormControlInput15" class="form-label">Descripcion</label></td>
                        <td><label for="exampleFormControlInput16" class="form-label">Año del Titulo</label></td>
                    </tr>
                      <td><input type="text" name="T1" class="form-control" id="exampleFormControlInput13"></td>
                      <td><input type="text" name="T2" class="form-control" id="exampleFormControlInput14"></td>
                      <td><input type="text" name="T3" class="form-control" id="exampleFormControlInput15"></td>
                      <td><input type="number" name="T4" class="form-control" min="1960" max="2024" id="exampleFormControlInput16"></td>
                    </tr>
                  </table>
                  <div class="row">
                    <div class="col-4">
                    <button type="button" onclick="adicionarT()" class="btn btn-success btn-with-icon">
                      <i class="fas fa-plus icon-style"></i> Agregar Campos
                    </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
              <div class="row">
                <div class="col-12">
                  <legend>Perfil Profesional</legend>
                  <table id="tabla_PP">
                    <tr>
                    <div class="row">
                        <td><label for="exampleFormControlInput13" class="form-label">Nombre De Persona/Empresa</label></td>
                        <td><label for="exampleFormControlInput14" class="form-label">Cargo (opcional)</label></td>
                        <td><label for="exampleFormControlInput15" class="form-label">Descripcion</label></td>
                        <td><label for="exampleFormControlInput16" class="form-label">Telefono</label></td>
                    </tr>
                      <td><input type="text" name="PP1" class="form-control" id="exampleFormControlInput13"></td>
                      <td><input type="text" name="PP2" class="form-control" id="exampleFormControlInput14"></td>
                      <td><input type="text" name="PP3" class="form-control" id="exampleFormControlInput15"></td>
                      <td><input type="number" name="PP4" class="form-control" min="3000000000" max="6999999999" id="exampleFormControlInput16"></td>
                    </tr>
                  </table>
                </div>
              </div>
              <div class="row">
                <div class="col-4">
                <button type="button" onclick="adicionarPP()" class="btn btn-success btn-with-icon">
                    <i class="fas fa-plus icon-style"></i> Agregar Campos
                </button>
                </div>
              </div>
              <div class="row">
                <div class="col-6">
                  <button type="submit" name="boton" value="registrar" class="btn btn-success registrado">
                      Registrar Usuario
                  </button>
                </div>
              </div>
              </div>
            </div>
            </form>
          </div>
        </div>
          <form method="post" action="../controlador/CUsuario.php">
            <div class="row">
             <div class="col-8">
              <label for="d1"> Ingresar Nombre de Usuario :</label>
              <input type="text" id="d1" name="d1">
            </div>
            <div class="col-2">
              <button type="submit" name="boton" value="consultaNombreUsuario" class="btn btn-primary"> Buscar </button>
            </div>
            <div class="col-2">
              <button type="submit" name="boton" value="consultaTodos" class="btn btn-primary"> Ver Todos </button>
            </div>
           </div>
          </form>
    </section>
    </body>
    <script>
      function cerrarSesion() {
          if (confirm("¿Estás seguro de que deseas cerrar sesión?")) {
            window.location.href = "../cerrarSesion.php";
          }
      }
    </script>
</html>